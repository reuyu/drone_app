# FireDrone ëª¨ë°”ì¼ ì•± - ì‘ì—…ì ê°€ì´ë“œ

## ğŸ“± í”„ë¡œì íŠ¸ ê°œìš”

AI ë“œë¡  í™”ì¬ ê°ì§€ ì‹œìŠ¤í…œì˜ React Native (Expo) ëª¨ë°”ì¼ ì•±ì…ë‹ˆë‹¤.  
ì‹¤ì œ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜(MySQL, Raspberry Pi, Jetson Orin Nano)ì™€ ì—°ë™í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì—°ë™

### ë°ì´í„° íë¦„
```
Raspberry Pi (ë“œë¡ ) 
  â†’ ì›¹ìŠ¤íŠ¸ë¦¬ë° ì˜ìƒ 
  â†’ Jetson Orin Nano (AI ë¶„ì„ - RT-DETR ëª¨ë¸) 
  â†’ MySQL ë°ì´í„°ë² ì´ìŠ¤ 
  â†’ React Native ì•± (ëª¨ë‹ˆí„°ë§)
```

### MySQL í…Œì´ë¸” êµ¬ì¡°

#### 1. `drone_list` í…Œì´ë¸”
- `drone_db_id` (Varchar(20), PK): ë“œë¡  ê³ ìœ  ID
- `drone_name` (Varchar(100), Unique): ë“œë¡  ì´ë¦„
- `drone_video_url` (Varchar(225)): ë¹„ë””ì˜¤ URL
- `drone_connect_time` (datetime): ì—°ê²° ì‹œê°„
- `drone_lat` (decimal(10, 8)): ìœ„ë„
- `drone_lon` (decimal(11, 8)): ê²½ë„

#### 2. `drone_name` í…Œì´ë¸” (ë™ì  ìƒì„±)
- ê° ë“œë¡ ë³„ë¡œ ìƒì„±ë˜ëŠ” í…Œì´ë¸”
- ê°ì§€ëœ ì´ë¯¸ì§€ ë° Jetson AI ë¶„ì„ ê²°ê³¼ ì €ì¥
- `smoke_score`: ì—°ê¸° ì ìˆ˜ (0-100)
- `detection_probability`: íƒì§€ í™•ë¥ 
- `object_class`: ê°ì²´ ë¶„ë¥˜
- `bounding_box`: ìœ„ì¹˜ ì¶”ì • ì¢Œí‘œ

#### 3. `video_url` í…Œì´ë¸”
- `drone_name` (Varchar(100), PK): ë“œë¡  ì´ë¦„
- `stream_video_url` (Varchar(2048)): ìŠ¤íŠ¸ë¦¬ë° URL

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
firedrone/
â”œâ”€â”€ App.js                          # ë©”ì¸ ì•± ì§„ì…ì  (ë„¤ë¹„ê²Œì´ì…˜ ì„¤ì •)
â”œâ”€â”€ index.js                        # Expo ì§„ì…ì 
â”œâ”€â”€ package.json                    # í”„ë¡œì íŠ¸ ì˜ì¡´ì„±
â”œâ”€â”€ app.json                        # Expo ì„¤ì •
â”‚
â””â”€â”€ src/
    â”œâ”€â”€ screens/                    # í™”ë©´ ì»´í¬ë„ŒíŠ¸
    â”‚   â”œâ”€â”€ LoginScreen.js         # ë¡œê·¸ì¸ í™”ë©´ (ì¹´ì¹´ì˜¤í†¡ ìŠ¤íƒ€ì¼)
    â”‚   â”œâ”€â”€ DroneListScreen.js     # ë“œë¡  ëª©ë¡ í™”ë©´
    â”‚   â”œâ”€â”€ MonitoringScreen.js    # ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ í™”ë©´
    â”‚   â”œâ”€â”€ InquiryScreen.js       # ì¡°íšŒ í™”ë©´ (ë‚ ì§œë³„)
    â”‚   â”œâ”€â”€ HistoryScreen.js       # ì´ë ¥ í™”ë©´ (ë ˆê±°ì‹œ)
    â”‚   â””â”€â”€ SettingsScreen.js      # ì„¤ì • í™”ë©´
    â”‚
    â”œâ”€â”€ components/                 # ì¬ì‚¬ìš© ì»´í¬ë„ŒíŠ¸
    â”‚   â”œâ”€â”€ BatteryIcon.js         # ë°°í„°ë¦¬ ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸
    â”‚   â”œâ”€â”€ DetectionCard.js       # ê°ì§€ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
    â”‚   â””â”€â”€ DetectionDetailModal.js # ìƒì„¸ ì •ë³´ ëª¨ë‹¬
    â”‚
    â”œâ”€â”€ navigation/
    â”‚   â””â”€â”€ MainTabNavigator.js    # í•˜ë‹¨ íƒ­ ë„¤ë¹„ê²Œì´ì…˜ (Monitor, History, Settings)
    â”‚
    â””â”€â”€ utils/                      # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
        â”œâ”€â”€ api.js                 # API í†µì‹  í•¨ìˆ˜ (ì„œë²„ ì—°ë™ ì¤€ë¹„)
        â”œâ”€â”€ mockData.js            # ëª¨ì˜ ë°ì´í„° (MySQL êµ¬ì¡° ë°˜ì˜)
        â”œâ”€â”€ notifications.js       # ì•Œë¦¼ ê¸°ëŠ¥
        â””â”€â”€ weather.js             # ê¸°ìƒ ë°ì´í„° ì²˜ë¦¬
```

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### 1. í•„ìˆ˜ ìš”êµ¬ì‚¬í•­
- Node.js 18+ ì„¤ì¹˜
- npm ë˜ëŠ” yarn
- Expo Go ì•± (ìŠ¤ë§ˆíŠ¸í°)

### 2. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
cd firedrone
npm install
```

### 3. ì•± ì‹¤í–‰

```bash
# ê°œë°œ ì„œë²„ ì‹œì‘
npx expo start

# ë˜ëŠ” ìºì‹œ í´ë¦¬ì–´ í›„ ì‹œì‘
npx expo start --clear

# ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ ì ‘ì† (ë‹¤ë¥¸ Wi-Fi)
npx expo start --tunnel
```

### 4. ì‹¤í–‰ ì˜µì…˜
- QR ì½”ë“œ ìŠ¤ìº”: Expo Go ì•±ìœ¼ë¡œ QR ì½”ë“œ ìŠ¤ìº”
- ì›¹ ë¸Œë¼ìš°ì €: í„°ë¯¸ë„ì—ì„œ `w` í‚¤
- Android ì—ë®¬ë ˆì´í„°: í„°ë¯¸ë„ì—ì„œ `a` í‚¤
- iOS ì‹œë®¬ë ˆì´í„° (Mac): í„°ë¯¸ë„ì—ì„œ `i` í‚¤

## ğŸ”Œ API ì„œë²„ ì—°ë™

### API ì—”ë“œí¬ì¸íŠ¸ ì„¤ì •

`src/utils/api.js` íŒŒì¼ì—ì„œ ì„œë²„ ì£¼ì†Œë¥¼ ì„¤ì •í•˜ì„¸ìš”:

```javascript
const API_BASE_URL = __DEV__ 
  ? 'http://localhost:3000/api'  // ê°œë°œ í™˜ê²½
  : 'https://your-server.com/api'; // í”„ë¡œë•ì…˜ í™˜ê²½
```

### í•„ìš”í•œ API ì—”ë“œí¬ì¸íŠ¸

#### 1. ë“œë¡  ëª©ë¡ ì¡°íšŒ
```
GET /api/drones
Response: Array<{
  drone_db_id: string,
  drone_name: string,
  drone_lat: number,
  drone_lon: number,
  drone_connect_time: datetime,
  status: 'Active' | 'Charging' | 'Offline',
  battery: number
}>
```

#### 2. ë“œë¡  ê°ì§€ ë°ì´í„° ì¡°íšŒ
```
GET /api/drones/{drone_db_id}/detections
Response: Array<{
  id: number,
  drone_db_id: string,
  drone_name: string,
  drone_connect_time: datetime,
  drone_lat: number,
  drone_lon: number,
  smoke_score: number,
  detection_probability: number,
  object_class: string,
  bounding_box: object,
  image_url: string
}>
```

#### 3. ë¹„ë””ì˜¤ ìŠ¤íŠ¸ë¦¬ë° URL ì¡°íšŒ
```
GET /api/video-url/{drone_name}
Response: {
  drone_name: string,
  stream_video_url: string
}
```

#### 4. ì‹¤ì‹œê°„ ê°ì§€ ë°ì´í„°
```
GET /api/drones/{drone_db_id}/realtime
Response: {
  smoke_score: number,
  detection_probability: number,
  object_class: string,
  bounding_box: object
}
```

#### 5. ë‚ ì§œë³„ ì´ë ¥ ì¡°íšŒ
```
GET /api/drones/{drone_db_id}/history?date=YYYY-MM-DD
Response: Array<DetectionData>
```

## ğŸ¨ ì£¼ìš” ê¸°ëŠ¥

### 1. ë“œë¡  ëª©ë¡ í™”ë©´ (DroneListScreen)
- ë“±ë¡ëœ ë“œë¡  ëª©ë¡ í‘œì‹œ
- ë°°í„°ë¦¬ ìƒíƒœ í‘œì‹œ (í¼ì„¼íŠ¸, ìƒ‰ìƒ)
- ë“œë¡  ìƒíƒœ: Active, Charging, Offline
- ë“œë¡  ì„ íƒ ì‹œ ëª¨ë‹ˆí„°ë§ í™”ë©´ìœ¼ë¡œ ì´ë™

### 2. ëª¨ë‹ˆí„°ë§ í™”ë©´ (MonitoringScreen)
- **GPS ì¢Œí‘œ**: ë“œë¡ ì˜ í˜„ì¬ ìœ„ì¹˜ (MySQL `drone_lat`, `drone_lon`)
- **ê¸°ìƒ ì •ë³´**: í’ì†, ìŠµë„ í‘œì‹œ
- **ìœ„í—˜ ë“±ê¸‰ íŒë³„**: ìŠµë„ < 30% ë˜ëŠ” í’ì† > 10m/s ì‹œ ê²½ê³ 
- **LIVE FEED**: Raspberry Piì—ì„œ ìŠ¤íŠ¸ë¦¬ë°í•˜ëŠ” ì˜ìƒ (URL: `video_url` í…Œì´ë¸”)
- **ê°ì§€ ë¡œê·¸**: Jetson AI ë¶„ì„ ê²°ê³¼ (ì—°ê¸° ì ìˆ˜, í™•ë¥ , ìœ„ì¹˜ ì¶”ì •)
- **ìë™ ì•Œë¦¼**: í™•ì‹ ë„ 75% ì´ìƒ ì‹œ í‘¸ì‹œ ì•Œë¦¼ ì „ì†¡
- **Test Fire ë²„íŠ¼**: ì•Œë¦¼ í…ŒìŠ¤íŠ¸

### 3. ì¡°íšŒ í™”ë©´ (InquiryScreen)
- ë‚ ì§œ ì„ íƒê¸°ë¡œ ì›í•˜ëŠ” ë‚ ì§œ ì„ íƒ
- ì„ íƒí•œ ë‚ ì§œì˜ ê°ì§€ ì´ë ¥ í‘œì‹œ
- ìœ„í—˜ë„ìˆœ ì •ë ¬ (ì—°ê¸° ì ìˆ˜ ë†’ì€ ìˆœ)
- ê° ê°ì§€ í•­ëª© ìƒì„¸ ì •ë³´ í‘œì‹œ

### 4. ë¡œê·¸ì¸ í™”ë©´ (LoginScreen)
- ì¹´ì¹´ì˜¤í†¡ ìŠ¤íƒ€ì¼ ë””ìì¸
- ì¹´ì¹´ì˜¤í†¡ ë¡œê·¸ì¸ ë²„íŠ¼ (UIë§Œ êµ¬í˜„, ì‹¤ì œ ì—°ë™ í•„ìš”)
- ê²ŒìŠ¤íŠ¸ ë¡œê·¸ì¸ ì˜µì…˜

## ğŸ“¦ ì£¼ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬

- `@react-navigation/native`: ë„¤ë¹„ê²Œì´ì…˜
- `@react-navigation/native-stack`: ìŠ¤íƒ ë„¤ë¹„ê²Œì´ì…˜
- `@react-navigation/bottom-tabs`: íƒ­ ë„¤ë¹„ê²Œì´ì…˜
- `expo-location`: ìœ„ì¹˜ ì •ë³´
- `expo-notifications`: í‘¸ì‹œ ì•Œë¦¼
- `expo-av`: ë¹„ë””ì˜¤ ìŠ¤íŠ¸ë¦¬ë° (í–¥í›„ ì‚¬ìš©)
- `lucide-react-native`: ì•„ì´ì½˜
- `date-fns`: ë‚ ì§œ ì²˜ë¦¬
- `react-native-safe-area-context`: Safe Area ì²˜ë¦¬

## ğŸ”§ ê°œë°œ í™˜ê²½ ì„¤ì •

### í™˜ê²½ ë³€ìˆ˜ (ì„ íƒì‚¬í•­)
í•„ìš” ì‹œ `.env` íŒŒì¼ ìƒì„±:
```
API_BASE_URL=http://your-server.com/api
```

### ëª¨ì˜ ë°ì´í„°
í˜„ì¬ëŠ” `src/utils/mockData.js`ì˜ ëª¨ì˜ ë°ì´í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.  
ì‹¤ì œ ì„œë²„ì™€ ì—°ë™ ì‹œ `src/utils/api.js`ì˜ í•¨ìˆ˜ë“¤ì´ ì‚¬ìš©ë©ë‹ˆë‹¤.

## ğŸ› ì•Œë ¤ì§„ ì´ìŠˆ ë° ê°œì„  ì‚¬í•­

1. **ë¹„ë””ì˜¤ ìŠ¤íŠ¸ë¦¬ë°**: í˜„ì¬ëŠ” URLë§Œ í‘œì‹œí•˜ë©°, ì‹¤ì œ ìŠ¤íŠ¸ë¦¬ë° ì¬ìƒì€ `expo-av`ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„ í•„ìš”
2. **ì¹´ì¹´ì˜¤í†¡ ë¡œê·¸ì¸**: UIë§Œ êµ¬í˜„ë˜ì–´ ìˆìœ¼ë©°, ì‹¤ì œ ì¹´ì¹´ì˜¤í†¡ ë¡œê·¸ì¸ ì—°ë™ í•„ìš”
3. **ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸**: í˜„ì¬ëŠ” ì´ˆê¸° ë¡œë“œ ì‹œ í•œ ë²ˆë§Œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ë©°, ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ëŠ” WebSocket ë˜ëŠ” í´ë§ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ í•„ìš”

## ğŸ“ ë°ì´í„° êµ¬ì¡° ì°¸ê³ 

### ë“œë¡  ë°ì´í„° êµ¬ì¡°
```javascript
{
  drone_db_id: 'DRONE001',
  drone_name: 'Drone Alpha',
  drone_lat: 37.5665,
  drone_lon: 126.9780,
  drone_connect_time: new Date(),
  status: 'Active',
  battery: 82
}
```

### ê°ì§€ ë°ì´í„° êµ¬ì¡° (Jetson AI ë¶„ì„ ê²°ê³¼)
```javascript
{
  id: 1,
  drone_db_id: 'DRONE001',
  drone_name: 'Drone Alpha',
  drone_connect_time: new Date(),
  drone_lat: 37.5665,
  drone_lon: 126.9780,
  smoke_score: 95,              // ì—°ê¸° ì ìˆ˜ (0-100)
  detection_probability: 95,     // íƒì§€ í™•ë¥ 
  object_class: 'smoke',         // ê°ì²´ ë¶„ë¥˜
  bounding_box: {                // ìœ„ì¹˜ ì¶”ì •
    x: 100,
    y: 150,
    width: 200,
    height: 180
  },
  image_url: 'https://...'
}
```

## ğŸ”„ ì„œë²„ ì—°ë™ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] `src/utils/api.js`ì˜ `API_BASE_URL` ì„¤ì •
- [ ] ëª¨ë“  API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„ í™•ì¸
- [ ] CORS ì„¤ì • (ì›¹ ë²„ì „ ì‚¬ìš© ì‹œ)
- [ ] MySQL ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í™•ì¸
- [ ] ë¹„ë””ì˜¤ ìŠ¤íŠ¸ë¦¬ë° URL ì •ìƒ ë™ì‘ í™•ì¸
- [ ] í‘¸ì‹œ ì•Œë¦¼ ì„œë²„ ì„¤ì • (í•„ìš” ì‹œ)

## ğŸ“ ë¬¸ì˜

í”„ë¡œì íŠ¸ ê´€ë ¨ ë¬¸ì˜ì‚¬í•­ì€ ì‘ì—…ìì—ê²Œ ì—°ë½ ë°”ëë‹ˆë‹¤.

---

**ì‘ì„±ì¼**: 2024-12-26  
**ë²„ì „**: 1.0.0

