ğŸ“‹ í”„ë¡œì íŠ¸ ì¸ìˆ˜ì¸ê³„ì„œ: ë“œë¡  í™”ì¬ ê°ì§€ ì‹œìŠ¤í…œ (Dual-Board Architecture)
To: Developer Gemini From: Architect Gemini Context: Google Antigravity (VS Code Environment)

1. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ê°œìš” (Hardware & Network)
ì´ ì‹œìŠ¤í…œì€ ë“œë¡ ì— íƒ‘ì¬ëœ ë‘ ê°œì˜ ë³´ë“œ(Jetson, Raspberry Pi)ì™€ ì§€ìƒì˜ ê´€ì œ ì›¹(User)ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ëª¨ë“  ë°±ì—”ë“œ ì½”ë“œëŠ” Jetsonì—ì„œ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ì „ì œë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.

Node 1: Raspberry Pi (Video Streamer)

ì—­í• : ì˜¤ì§ ì˜ìƒ ì†¡ì¶œë§Œ ë‹´ë‹¹.

ì¶œë ¥: http://[RPI_IP]:8080/?action=stream (MJPEG Stream)

Node 2: Jetson Nano (Main Server & AI Edge)

ì—­í• : AI í™”ì¬ ê°ì§€, DB ì €ì¥, ì›¹ ì„œë²„ í˜¸ìŠ¤íŒ….

íƒ‘ì¬ ì†Œí”„íŠ¸ì›¨ì–´: Python(AI ê°ì§€), MySQL(DB), Node.js(API ì„œë²„), React(ë¹Œë“œ íŒŒì¼ í˜¸ìŠ¤íŒ…).

Client: ê´€ì œ í™”ë©´ (Web Browser)

ì ‘ì†: http://[JETSON_IP]:3000

í™”ë©´ êµ¬ì„±: ë¼ì¦ˆë² ë¦¬íŒŒì´ì˜ ì˜ìƒ ìŠ¤íŠ¸ë¦¼ + ì ¯ìŠ¨ì˜ í™”ì¬ ê°ì§€ ë¡œê·¸ë¥¼ ë™ì‹œì— í‘œì‹œ.

2. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ (MySQL)
Target DB: Jetson ë‚´ë¶€ ë¡œì»¬ DB (localhost) Database Name: drone_fire_db (ìƒì„± í•„ìš”)

A. drone_list (ë“œë¡  ë“±ë¡ ì •ë³´)

ë“œë¡ ì´ ì‹œìŠ¤í…œì— ë“±ë¡ë  ë•Œ ê¸°ë¡ë©ë‹ˆë‹¤.

SQL

CREATE TABLE IF NOT EXISTS drone_list (
    drone_db_id VARCHAR(20) NOT NULL PRIMARY KEY,
    drone_name VARCHAR(100) NOT NULL UNIQUE, -- ì´ ì´ë¦„ìœ¼ë¡œ ë™ì  í…Œì´ë¸” ìƒì„±
    drone_video_url VARCHAR(255) NULL,       -- ë¼ì¦ˆë² ë¦¬íŒŒì´ ìŠ¤íŠ¸ë¦¼ ì£¼ì†Œ
    drone_connect_time DATETIME NULL,
    drone_lat DECIMAL(10,8) NULL,
    drone_lon DECIMAL(11,8) NULL
);
B. drone_url (ì‚¬ì „ ì •ì˜ëœ URL ë§¤í•‘)

ë¯¸ë¦¬ ì…ë ¥ëœ ìŠ¤íŠ¸ë¦¼ ì£¼ì†Œ ì €ì¥ì†Œì…ë‹ˆë‹¤.

SQL

CREATE TABLE IF NOT EXISTS drone_url (
    drone_name VARCHAR(100) NULL UNIQUE,
    stream_video_url VARCHAR(2048) NULL
);
C. [drone_name] (ë™ì  ë¡œê·¸ í…Œì´ë¸”)

ë“œë¡  ë“±ë¡ ì‹œ drone_nameì„ í…Œì´ë¸”ëª…ìœ¼ë¡œ í•˜ì—¬ ìë™ ìƒì„±ë©ë‹ˆë‹¤.

SQL

CREATE TABLE IF NOT EXISTS {drone_name} (
    id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
    drone_db_id VARCHAR(20) NOT NULL,
    event_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    confidence FLOAT NULL,
    image_path VARCHAR(255) NULL, -- ê°ì§€ëœ ì´ë¯¸ì§€ ê²½ë¡œ
    gps_lat DECIMAL(10,8) NULL,
    gps_lon DECIMAL(11,8) NULL
);
3. ëª¨ë“ˆë³„ ìƒì„¸ êµ¬í˜„ ê³„íš (Development Plan)
[Module 1] Backend (Node.js + Express)

ìœ„ì¹˜: /backend

í•µì‹¬ ì—­í• : API ì œê³µ ë° React ì •ì  íŒŒì¼ ì„œë¹™.

ì£¼ìš” API Endpoints:

POST /api/register:

Input: { drone_name, drone_db_id }

Logic: drone_listì— Insert + drone_urlì—ì„œ URL ì¡°íšŒí•˜ì—¬ ì—…ë°ì´íŠ¸ + CREATE TABLE IF NOT EXISTS [drone_name]... ì‹¤í–‰ (ë™ì  í…Œì´ë¸” ìƒì„± í•„ìˆ˜).

POST /api/event:

Input: { drone_name, confidence, image_path, ... }

Logic: í•´ë‹¹ ë“œë¡ ì˜ í…Œì´ë¸”ì— í™”ì¬ ê°ì§€ ë¡œê·¸ Insert.

GET /api/logs/:drone_name:

Logic: í•´ë‹¹ ë“œë¡  í…Œì´ë¸”ì˜ ìµœê·¼ ë¡œê·¸ 10ê°œ ì¡°íšŒ.

Frontend Serving:

express.staticì„ ì‚¬ìš©í•˜ì—¬ ../frontend/dist í´ë”ë¥¼ ì„œë¹™. ë£¨íŠ¸ ê²½ë¡œ(/) ì ‘ì† ì‹œ index.html ë°˜í™˜.

[Module 2] Frontend (React + Vite)

ìœ„ì¹˜: /frontend

UI êµ¬ì„±:

Header: ë“œë¡  ìƒíƒœ ìš”ì•½.

Main Left (Video): <img src={streamUrl} /> íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¼ì¦ˆë² ë¦¬íŒŒì´ MJPEG ìŠ¤íŠ¸ë¦¼ í‘œì‹œ. (URLì€ ë°±ì—”ë“œ APIì—ì„œ ë°›ì•„ì˜´)

Main Right (Log): setIntervalì„ ì‚¬ìš©í•˜ì—¬ 1ì´ˆë§ˆë‹¤ /api/logsë¥¼ í´ë§, í™”ì¬ ê°ì§€ ë‚´ì—­ì„ ë¦¬ìŠ¤íŠ¸ë¡œ í‘œì‹œ.

[Module 3] Edge AI Simulation (Python)

ìœ„ì¹˜: /edge_script

íŒŒì¼ëª…: mock_detector.py

ê¸°ëŠ¥: ì‹¤ì œ AI ëª¨ë¸ ì—†ì´ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•¨.

ë¬´í•œ ë£¨í”„ë¥¼ ëŒë©° ëœë¤í•œ ì‹œê°„ ê°„ê²©ìœ¼ë¡œ í™”ì¬ ê°ì§€ ìƒí™©ì„ ê°€ì •.

requests ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ http://localhost:3000/api/eventë¡œ POST ìš”ì²­ ì „ì†¡.

4. í´ë” êµ¬ì¡° (Recommended Structure)
Plaintext

/drone-monitor-system
â”œâ”€â”€ /backend          (Node.js Express Server)
â”‚   â”œâ”€â”€ server.js     (Main Entry)
â”‚   â”œâ”€â”€ database.js   (MySQL Connection Pool)
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ /frontend         (React Vite App)
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ vite.config.js
â”‚   â””â”€â”€ package.json
â””â”€â”€ /edge_script      (Python Scripts for Jetson)
    â””â”€â”€ mock_detector.py